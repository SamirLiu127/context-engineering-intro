# 上下文工程模板

源倉庫：https://github.com/coleam00/Context-Engineering-Intro 的翻譯版本

一個全面的上下文工程入門模板 - 上下文工程是為 AI 編碼助手工程化上下文的學科，使它們擁有端到端完成任務所需的資訊。

> **上下文工程比提示工程好 10 倍，比憑感覺編碼好 100 倍。**

## 🚀 快速开始

```bash
# 1. 複製此模板
git clone https://github.com/sabernagato/Context-Engineering-Intro-ZH.git
cd Context-Engineering-Intro-ZH

# 2. 設置專案規則（可選 - 已提供模板）
# 編輯 CLAUDE.md 添加您的專案特定指南

# 3. 添加範例（強烈推薦）
# 將相關程式碼範例放在 examples/ 資料夾中

# 4. 建立初始功能請求
# 編輯 INITIAL.md 輸入您的功能需求

# 5. 產生全面的 PRP（產品需求提示）
# 在 Claude Code 中运行：
/generate-prp INITIAL.md

# 6. 執行 PRP 以實現功能
# 在 Claude Code 中运行：
/execute-prp PRPs/your-feature-name.md
```

## 📚 目录

- [什麼是上下文工程？](#什麼是上下文工程)
- [模板结构](#模板结构)
- [分步指南](#分步指南)
- [編寫有效的 INITIAL.md 檔案](#編寫有效的-initialmd-檔案)
- [PRP 工作流程](#prp-工作流程)
- [有效使用範例](#有效使用範例)
- [最佳实践](#最佳实践)

## 什麼是上下文工程？

上下文工程代表了從傳統提示工程的範式轉變：

### 提示工程 vs 上下文工程

**提示工程：**
- 專注於巧妙的措辭和特定的表述
- 局限於如何表述任務
- 就像給某人一張便利貼

**上下文工程：**
- 提供全面上下文的完整系統
- 包括文件、範例、規則、模式和驗證
- 就像編寫一個包含所有細節的完整劇本

### 為什麼上下文工程很重要

1. **減少 AI 失敗**：大多數代理失敗不是模型失敗 - 而是上下文失敗
2. **確保一致性**：AI 遵循您的專案模式和約定
3. **支援複雜功能**：AI 可以使用適當的上下文處理多步驟實現
4. **自我糾正**：驗證循環允許 AI 修復自己的錯誤

## 模板结构

```
context-engineering-intro/
├── .claude/
│   ├── commands/
│   │   ├── generate-prp.md    # 產生全面的 PRP
│   │   └── execute-prp.md     # 執行 PRP 以實現功能
│   └── settings.local.json    # Claude Code 權限
├── PRPs/
│   ├── templates/
│   │   └── prp_base.md       # PRP 的基礎模板
│   └── EXAMPLE_multi_agent_prp.md  # 完整 PRP 的範例
├── examples/                  # 您的程式碼範例（關鍵！）
├── CLAUDE.md                 # AI 助手的全域規則
├── INITIAL.md               # 功能請求的模板
├── INITIAL_EXAMPLE.md       # 功能請求範例
└── README.md                # 本檔案
```

此模板不關注使用上下文工程的 RAG 和工具，因為我很快會有更多內容。;)

## 分步指南

### 1. 設置全域規則 (CLAUDE.md)

`CLAUDE.md` 檔案包含 AI 助手在每次對話中都會遵循的專案範圍規則。模板包括：

- **專案意識**：閱讀規劃文件，檢查任務
- **程式碼結構**：檔案大小限制，模組組織
- **測試要求**：單元測試模式，覆蓋率期望
- **風格約定**：語言偏好，格式規則
- **文件標準**：文件字符串格式，註釋實踐

**您可以按原樣使用提供的模板或為您的專案自訂它。**

### 2. 建立初始功能請求

編輯 `INITIAL.md` 來描述您想要建構的內容：

```markdown
## 功能：
[描述您想要建構的內容 - 具體說明功能和需求]

## 範例：
[列出 examples/ 資料夾中的任何範例檔案並解釋應如何使用它們]

## 文件：
[包括相關文件、API 或 MCP 伺服器資源的連結]

## 其他考慮：
[提及任何陷阱、具體要求或 AI 助手通常會遺漏的事情]
```

**請參閱 `INITIAL_EXAMPLE.md` 獲取完整範例。**

### 3. 產生 PRP

PRP（產品需求提示）是全面的實施藍圖，包括：

- 完整的上下文和文件
- 帶驗證的實施步驟
- 錯誤處理模式
- 測試要求

它們類似於 PRD（產品需求文件），但專門為指導 AI 編碼助手而設計。

在 Claude Code 中运行：
```bash
/generate-prp INITIAL.md
```

**注意：** 斜線命令是在 `.claude/commands/` 中定義的自訂命令。您可以查看它們的實現：
- `.claude/commands/generate-prp.md` - 查看它如何研究和建立 PRP
- `.claude/commands/execute-prp.md` - 查看它如何從 PRP 實現功能

這些命令中的 `$ARGUMENTS` 變數接收您在命令名稱後傳遞的任何內容（例如，`INITIAL.md` 或 `PRPs/your-feature.md`）。

此命令將：
1. 讀取您的功能請求
2. 研究程式碼庫中的模式
3. 搜尋相關文件
4. 在 `PRPs/your-feature-name.md` 中建立全面的 PRP

### 4. 執行 PRP

產生後，執行 PRP 以實現您的功能：

```bash
/execute-prp PRPs/your-feature-name.md
```

AI 編碼助手將：
1. 從 PRP 讀取所有上下文
2. 建立詳細的實施計畫
3. 執行每個步驟並進行驗證
4. 執行測試並修復任何問題
5. 確保滿足所有成功標準

## 編寫有效的 INITIAL.md 檔案

### 關鍵部分說明

**功能**：具體且全面
- ❌ "建構一個網路爬蟲"
- ✅ "使用 BeautifulSoup 建構一個非同步網路爬蟲，從電子商務網站擷取產品資料，處理速率限制，並將結果儲存在 PostgreSQL 中"

**範例**：利用 examples/ 資料夾
- 將相關程式碼模式放在 `examples/` 中
- 引用特定檔案和要遵循的模式
- 解釋應該模仿哪些方面

**文件**：包括所有相關資源
- API 文件 URL
- 程式庫指南
- MCP 伺服器文件
- 資料庫架構

**其他考慮**：捕獲重要細節
- 身份驗證要求
- 速率限制或配額
- 常見陷阱
- 效能要求

## PRP 工作流程

### /generate-prp 如何運作

該命令遵循此程序：

1. **研究階段**
   - 分析您的程式碼庫中的模式
   - 搜尋類似的實現
   - 識別要遵循的約定

2. **文件收集**
   - 獲取相關的 API 文件
   - 包括程式庫文件
   - 添加陷阱和怪癖

3. **藍圖建立**
   - 建立分步實施計畫
   - 包括驗證門
   - 添加測試要求

4. **品質檢查**
   - 評分置信水平 (1-10)
   - 確保包含所有上下文

### /execute-prp 如何運作

1. **載入上下文**：讀取整個 PRP
2. **計畫**：使用 TodoWrite 建立詳細的任務列表
3. **執行**：實現每個元件
4. **驗證**：執行測試和 linting
5. **迭代**：修復發現的任何問題
6. **完成**：確保滿足所有要求

請參閱 `PRPs/EXAMPLE_multi_agent_prp.md` 了解產生內容的完整範例。

## 有效使用範例

`examples/` 資料夾對於成功**至關重要**。當 AI 編碼助手可以看到要遵循的模式時，它們的表現會更好。

### 範例中應包含什麼

1. **程式碼結構模式**
   - 如何組織模組
   - 匯入約定
   - 類別/函數模式

2. **測試模式**
   - 測試檔案結構
   - 模擬方法
   - 斷言風格

3. **整合模式**
   - API 客戶端實現
   - 資料庫連接
   - 身份驗證流程

4. **CLI 模式**
   - 參數解析
   - 輸出格式
   - 錯誤處理

### 範例結構

```
examples/
├── README.md           # 解釋每個範例演示的內容
├── cli.py             # CLI 實現模式
├── agent/             # 代理架構模式
│   ├── agent.py      # 代理建立模式
│   ├── tools.py      # 工具實現模式
│   └── providers.py  # 多提供商模式
└── tests/            # 測試模式
    ├── test_agent.py # 單元測試模式
    └── conftest.py   # Pytest 設定
```

## 最佳实践

### 1. 在 INITIAL.md 中要明確
- 不要假設 AI 知道您的偏好
- 包括具體的要求和約束
- 大量引用範例

### 2. 提供全面的範例
- 更多範例 = 更好的實現
- 展示該做什麼和不該做什麼
- 包括錯誤處理模式

### 3. 使用驗證門
- PRP 包括必須通過的測試命令
- AI 將迭代直到所有驗證成功
- 這確保了第一次嘗試就能獲得工作程式碼

### 4. 利用文件
- 包括官方 API 文件
- 添加 MCP 伺服器資源
- 引用特定的文件部分

### 5. 自訂 CLAUDE.md
- 添加您的約定
- 包括專案特定規則
- 定義編碼標準

## 資源

- [Claude Code 文档](https://docs.anthropic.com/en/docs/claude-code)
- [上下文工程最佳實踐](https://www.philschmid.de/context-engineering)